<html>
<head>
<title>BenFinder</title>
<link rel="stylesheet"
      type="text/css"
      href="android.css" media="only screen and (max-width:1440px)" 
      />
</head>
<body>
  <div id="header">
    <ul>
      <li>
      <h1><a href="./android.html"> BenFinder - Breathing Detection using Kinect</a></h1>
      </li>
  </ul>
  </div>
    <div id="summaryData">Summary Data </div>
  </div>
  <div class="newline">
    <div class="imcap">
      <a href="/rawImg">
	<b>Raw Image</b><br>
	<img id="rawImg" src="/rawImg" alt="raw image" width="320" height="240">
      </a>
    </div>
    <div class="imcap">
    <a href="/maskedImg">
      <b>Processed Image</b><br>
      <img id="maskedImg" src="/maskedImg" alt="masked image" width="320" height="240">
    </a>
    </div>
  </div>
  <div class="newline">
    <div class="imcap">
      <a href="/chartImg">
	<b>Brightness Time Series<b><br>
	    <img id="chartImg" src="/chartImg" alt="chart image" width="300" height="240">
      </a>
    </div>
  <div class="newline">
    <a href="/saveBgImg"> Save Background Image Now</a>
  </div>

<!-- ---------------------------------------------- -->

<script src=/static/jquery-1.10.2.min.js></script>
<script>
$(document).ready(function() {
   setInterval(refreshPage,2000);
});

function refreshPage() {
   statusStrs=['OK','Warning','ALARM!!!!','Not Found']
   $.ajax({url:"/jsonData"}).done(function(dataStr) {
      data = JSON.parse(dataStr);
      $("#summaryData").html(
          "Summary Data <br>"
          +"Status="+data['status']+" - "+statusStrs[data['status']]+"<br>"
          +"Rate="+data['rate']+" bpm <br>"
          +"Brightness="+data['bri']+"<br>"
          +"Area="+data['area']);
   d = new Date();
   $("#rawImg").attr("src", "/rawImg?"+d.getTime());
   $("#maskedImg").attr("src", "/maskedImg?"+d.getTime());
   $("#chartImg").attr("src", "/chartImg?"+d.getTime());
});
}
</script>
</body>
</html>
