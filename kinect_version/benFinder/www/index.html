<html>
<head>
<title>BenFinder</title>
<style>
.imcap {float:left}
.newline {clear:both}
</style>
</head>
<body>
  <h1> BenFinder - Breathing Detection using Kinect</h1>
  <div class="newline">
    <div class="imcap">
      <a href="/rawImg">
	<b>Raw Image</b><br>
	<img id="rawImg" src="/rawImg" alt="raw image" width="320" height="240">
      </a>
    </div>
    <div class="imcap">
    <a href="/maskedImg">
      <b>Processed Image</b><br>
      <img id="maskedImg" src="/maskedImg" alt="masked image" width="320" height="240">
    </a>
    </div>
  </div>
  <div class="newline">
    <div class="imcap">
      <a href="/chartImg">
	<b>Brightness Time Series<b><br>
	    <img id="chartImg" src="/chartImg" alt="chart image" width="300" height="240">
      </a>
    </div>
    <div style="font-size:250%;" id="summaryData">Summary Data </div>
  </div>
  <div class="newline">
    <a href="/saveBgImg"> Save Background Image Now</a>
  </div>

<!-- ---------------------------------------------- -->

<script src=/static/jquery-1.10.2.min.js></script>
<script>
$(document).ready(function() {
   setInterval(refreshPage,2000);
});

function refreshPage() {
   statusStrs=['OK','Warning','ALARM!!!!','Not Found']
   $.ajax({url:"/jsonData"}).done(function(dataStr) {
      data = JSON.parse(dataStr);
      $("#summaryData").html(
          "Summary Data <br>"
          +"Status="+data['status']+" - "+statusStrs[data['status']]+"<br>"
          +"Rate="+data['rate']+" bpm <br>"
          +"Brightness="+data['bri']+"<br>"
          +"Area="+data['area']);
   d = new Date();
   $("#rawImg").attr("src", "/rawImg?"+d.getTime());
   $("#maskedImg").attr("src", "/maskedImg?"+d.getTime());
   $("#chartImg").attr("src", "/chartImg?"+d.getTime());
});
}
</script>
</body>
</html>
